import{j as e,C as q,B as g,e as j,ah as Q,a9 as U,T as l,G as n,f as b,h as v,ai as Y,aj as C,i as ee,y as te,z as se,F as ae,H as S,J as s,K as le,g as D,af as w,ag as re,V as ie,ak as ne,al as de,am as ce,an as oe,W as A,X as k,Z as B,_ as W,$ as I,a0 as z,a1 as E,a2 as h,a3 as F,ao as he,ap as ue,o as xe}from"./ui-4acb94fb.js";import{r as d}from"./vendor-c1fc8f85.js";import{W as je}from"./index-41294929.js";import{b as me}from"./router-7ed49354.js";import"./utils-4719f846.js";import"./query-956dc969.js";const ye=()=>{const V=me(),[T,O]=d.useState(0),[a,m]=d.useState([]),[c,u]=d.useState(null),[G,x]=d.useState(!1),[H,p]=d.useState(!1),[r,o]=d.useState({title:"",type:"article",status:"draft",content:""});d.useEffect(()=>{m([{id:"1",title:"Новые правила дорожного движения 2024",type:"article",status:"published",author:"Муталиев А.И.",createdAt:"2024-01-15",updatedAt:"2024-01-20",views:256},{id:"2",title:"Открытие нового филиала в Назрани",type:"news",status:"published",author:"Администратор",createdAt:"2024-01-10",updatedAt:"2024-01-10",views:142},{id:"3",title:"Основные сведения об автошколе",type:"page",status:"published",author:"Муталиев А.И.",createdAt:"2024-01-01",updatedAt:"2024-01-15",views:89},{id:"4",title:"Скидки для студентов",type:"article",status:"draft",author:"Администратор",createdAt:"2024-01-22",updatedAt:"2024-01-22",views:0}])},[]);const M=(t,i)=>{O(i)},R=()=>{switch(T){case 0:return a;case 1:return a.filter(t=>t.type==="article");case 2:return a.filter(t=>t.type==="news");case 3:return a.filter(t=>t.type==="page");default:return a}},J=t=>{switch(t){case"published":return"success";case"draft":return"warning";case"archived":return"default";default:return"default"}},K=t=>{switch(t){case"published":return"Опубликовано";case"draft":return"Черновик";case"archived":return"Архив";default:return t}},L=t=>{switch(t){case"article":return"Статья";case"news":return"Новость";case"page":return"Страница";default:return t}},N=t=>{u(t),o({title:t.title,type:t.type,status:t.status,content:""}),x(!0)},P=t=>{u(t),p(!0)},X=()=>{if(c){const t=a.map(i=>i.id===c.id?{...i,...r,updatedAt:new Date().toISOString().split("T")[0]}:i);m(t)}x(!1),u(null)},Z=()=>{c&&m(a.filter(t=>t.id!==c.id)),p(!1),u(null)},_=t=>{const i=t.status==="published"?"draft":"published",$=a.map(y=>y.id===t.id?{...y,status:i}:y);m($)},f={total:a.length,published:a.filter(t=>t.status==="published").length,draft:a.filter(t=>t.status==="draft").length,totalViews:a.reduce((t,i)=>t+i.views,0)};return e.jsxs(e.Fragment,{children:[e.jsxs(je,{children:[e.jsx("title",{children:"Управление контентом - РУЛЬ+ Админ"}),e.jsx("meta",{name:"robots",content:"noindex,nofollow"})]}),e.jsxs(q,{maxWidth:"xl",sx:{py:4},children:[e.jsxs(g,{sx:{display:"flex",alignItems:"center",mb:4},children:[e.jsx(j,{startIcon:e.jsx(Q,{}),onClick:()=>V("/admin"),sx:{mr:2},children:"Назад"}),e.jsx(U,{sx:{mr:2,fontSize:32,color:"primary.main"}}),e.jsxs(g,{children:[e.jsx(l,{variant:"h4",component:"h1",fontWeight:"bold",children:"Управление контентом"}),e.jsx(l,{variant:"body1",color:"text.secondary",children:"Управление статьями, новостями и страницами сайта"})]})]}),e.jsxs(n,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(n,{item:!0,xs:12,sm:6,md:3,children:e.jsx(b,{children:e.jsxs(v,{children:[e.jsx(l,{color:"text.secondary",gutterBottom:!0,children:"Всего материалов"}),e.jsx(l,{variant:"h4",color:"primary",children:f.total})]})})}),e.jsx(n,{item:!0,xs:12,sm:6,md:3,children:e.jsx(b,{children:e.jsxs(v,{children:[e.jsx(l,{color:"text.secondary",gutterBottom:!0,children:"Опубликовано"}),e.jsx(l,{variant:"h4",color:"success.main",children:f.published})]})})}),e.jsx(n,{item:!0,xs:12,sm:6,md:3,children:e.jsx(b,{children:e.jsxs(v,{children:[e.jsx(l,{color:"text.secondary",gutterBottom:!0,children:"Черновики"}),e.jsx(l,{variant:"h4",color:"warning.main",children:f.draft})]})})}),e.jsx(n,{item:!0,xs:12,sm:6,md:3,children:e.jsx(b,{children:e.jsxs(v,{children:[e.jsx(l,{color:"text.secondary",gutterBottom:!0,children:"Всего просмотров"}),e.jsx(l,{variant:"h4",color:"info.main",children:f.totalViews})]})})})]}),e.jsx(g,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:e.jsxs(Y,{value:T,onChange:M,children:[e.jsx(C,{label:"Все"}),e.jsx(C,{label:"Статьи"}),e.jsx(C,{label:"Новости"}),e.jsx(C,{label:"Страницы"})]})}),e.jsx(ee,{sx:{width:"100%",overflow:"hidden"},children:e.jsx(te,{children:e.jsxs(se,{children:[e.jsx(ae,{children:e.jsxs(S,{children:[e.jsx(s,{children:"Заголовок"}),e.jsx(s,{children:"Тип"}),e.jsx(s,{children:"Статус"}),e.jsx(s,{children:"Автор"}),e.jsx(s,{children:"Дата создания"}),e.jsx(s,{children:"Просмотры"}),e.jsx(s,{align:"center",children:"Действия"})]})}),e.jsx(le,{children:R().map(t=>e.jsxs(S,{hover:!0,children:[e.jsx(s,{children:e.jsx(l,{variant:"subtitle2",fontWeight:"medium",children:t.title})}),e.jsx(s,{children:e.jsx(D,{label:L(t.type),size:"small",variant:"outlined"})}),e.jsx(s,{children:e.jsx(D,{label:K(t.status),size:"small",color:J(t.status)})}),e.jsx(s,{children:t.author}),e.jsx(s,{children:t.createdAt}),e.jsx(s,{children:t.views}),e.jsxs(s,{align:"center",children:[e.jsx(w,{size:"small",onClick:()=>_(t),title:t.status==="published"?"Скрыть":"Опубликовать",children:t.status==="published"?e.jsx(re,{}):e.jsx(ie,{})}),e.jsx(w,{size:"small",onClick:()=>N(t),title:"Редактировать",children:e.jsx(ne,{})}),e.jsx(w,{size:"small",onClick:()=>P(t),title:"Удалить",color:"error",children:e.jsx(de,{})})]})]},t.id))})]})})}),e.jsx(ce,{color:"primary","aria-label":"add",sx:{position:"fixed",bottom:24,right:24},onClick:()=>{u(null),o({title:"",type:"article",status:"draft",content:""}),x(!0)},children:e.jsx(oe,{})}),e.jsxs(A,{open:G,onClose:()=>x(!1),maxWidth:"md",fullWidth:!0,children:[e.jsx(k,{children:c?"Редактировать материал":"Создать новый материал"}),e.jsx(B,{children:e.jsxs(g,{sx:{pt:2},children:[e.jsx(W,{fullWidth:!0,label:"Заголовок",value:r.title,onChange:t=>o({...r,title:t.target.value}),sx:{mb:3}}),e.jsxs(n,{container:!0,spacing:3,sx:{mb:3},children:[e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsxs(I,{fullWidth:!0,children:[e.jsx(z,{children:"Тип"}),e.jsxs(E,{value:r.type,label:"Тип",onChange:t=>o({...r,type:t.target.value}),children:[e.jsx(h,{value:"article",children:"Статья"}),e.jsx(h,{value:"news",children:"Новость"}),e.jsx(h,{value:"page",children:"Страница"})]})]})}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsxs(I,{fullWidth:!0,children:[e.jsx(z,{children:"Статус"}),e.jsxs(E,{value:r.status,label:"Статус",onChange:t=>o({...r,status:t.target.value}),children:[e.jsx(h,{value:"draft",children:"Черновик"}),e.jsx(h,{value:"published",children:"Опубликовано"}),e.jsx(h,{value:"archived",children:"Архив"})]})]})})]}),e.jsx(W,{fullWidth:!0,label:"Содержание",multiline:!0,rows:8,value:r.content,onChange:t=>o({...r,content:t.target.value}),placeholder:"Введите содержание материала..."})]})}),e.jsxs(F,{children:[e.jsx(j,{onClick:()=>x(!1),startIcon:e.jsx(he,{}),children:"Отмена"}),e.jsx(j,{onClick:X,variant:"contained",startIcon:e.jsx(ue,{}),children:"Сохранить"})]})]}),e.jsxs(A,{open:H,onClose:()=>p(!1),children:[e.jsx(k,{children:"Подтверждение удаления"}),e.jsxs(B,{children:[e.jsx(xe,{severity:"warning",sx:{mb:2},children:"Это действие нельзя отменить!"}),e.jsxs(l,{children:['Вы уверены, что хотите удалить материал "',c?.title,'"?']})]}),e.jsxs(F,{children:[e.jsx(j,{onClick:()=>p(!1),children:"Отмена"}),e.jsx(j,{onClick:Z,color:"error",variant:"contained",children:"Удалить"})]})]})]})]})};export{ye as default};
//# sourceMappingURL=index-2a5523d9.js.map
