import{j as e,C as N,B as c,e as p,ah as X,O as Z,T as t,G as l,f as b,h as y,ai as _,aj as H,i as $,y as q,z as Q,F as U,H as S,J as a,K as Y,A as ee,aB as re,g as se,af as D,ak as te,al as ae,am as le,an as ne,W as T,X as B,Z as W,_ as x,$ as w,a0 as I,a1 as k,a2 as d,a3 as P,ao as oe,ap as ie,o as ce}from"./ui-4acb94fb.js";import{r as u}from"./vendor-c1fc8f85.js";import{W as de}from"./index-41294929.js";import{b as ue}from"./router-7ed49354.js";import"./utils-4719f846.js";import"./query-956dc969.js";const ve=()=>{const A=ue(),[C,E]=u.useState(0),[n,g]=u.useState([]),[h,m]=u.useState(null),[F,j]=u.useState(!1),[z,v]=u.useState(!1),[s,o]=u.useState({name:"",phone:"",email:"",course:"",status:"active",instructor:"",theoryHours:0,practiceHours:0});u.useEffect(()=>{g([{id:"1",name:"Абдулаев Магомед Русланович",phone:"+7928-111-22-33",email:"abdul@example.com",course:"Категория B",enrollDate:"2024-01-15",status:"active",progress:75,instructor:"Иванов И.И.",theoryHours:30,practiceHours:15,totalTheoryHours:40,totalPracticeHours:20},{id:"2",name:"Исаева Хава Ахмедовна",phone:"+7928-444-55-66",email:"isaeva@example.com",course:"Категория B",enrollDate:"2024-02-01",status:"active",progress:45,instructor:"Петрова А.С.",theoryHours:18,practiceHours:8,totalTheoryHours:40,totalPracticeHours:20},{id:"3",name:"Газиев Руслан Мурадович",phone:"+7928-777-88-99",email:"gaziev@example.com",course:"Категория B",enrollDate:"2023-11-20",status:"completed",progress:100,instructor:"Сидоров П.А.",theoryHours:40,practiceHours:20,totalTheoryHours:40,totalPracticeHours:20},{id:"4",name:"Мурадова Зарема Салманovna",phone:"+7928-123-45-67",email:"muradova@example.com",course:"Категория B",enrollDate:"2024-01-30",status:"suspended",progress:25,instructor:"Иванов И.И.",theoryHours:10,practiceHours:2,totalTheoryHours:40,totalPracticeHours:20}])},[]);const O=(r,i)=>{E(i)},M=()=>{switch(C){case 0:return n;case 1:return n.filter(r=>r.status==="active");case 2:return n.filter(r=>r.status==="completed");case 3:return n.filter(r=>r.status==="suspended"||r.status==="dropped");default:return n}},R=r=>{switch(r){case"active":return"primary";case"completed":return"success";case"suspended":return"warning";case"dropped":return"error";default:return"default"}},G=r=>{switch(r){case"active":return"Обучается";case"completed":return"Завершил";case"suspended":return"Приостановлен";case"dropped":return"Отчислен";default:return r}},L=r=>{m(r),o({name:r.name,phone:r.phone,email:r.email,course:r.course,status:r.status,instructor:r.instructor,theoryHours:r.theoryHours,practiceHours:r.practiceHours}),j(!0)},V=r=>{m(r),v(!0)},J=()=>{if(h){const r=n.map(i=>i.id===h.id?{...i,...s,progress:Math.round((s.theoryHours/40+s.practiceHours/20)*50)}:i);g(r)}else{const r={id:Date.now().toString(),...s,enrollDate:new Date().toISOString().split("T")[0],totalTheoryHours:40,totalPracticeHours:20,progress:Math.round((s.theoryHours/40+s.practiceHours/20)*50)};g([...n,r])}j(!1),m(null)},K=()=>{h&&g(n.filter(r=>r.id!==h.id)),v(!1),m(null)},f={total:n.length,active:n.filter(r=>r.status==="active").length,completed:n.filter(r=>r.status==="completed").length,avgProgress:Math.round(n.reduce((r,i)=>r+i.progress,0)/n.length)};return e.jsxs(e.Fragment,{children:[e.jsxs(de,{children:[e.jsx("title",{children:"Управление студентами - РУЛЬ+ Админ"}),e.jsx("meta",{name:"robots",content:"noindex,nofollow"})]}),e.jsxs(N,{maxWidth:"xl",sx:{py:4},children:[e.jsxs(c,{sx:{display:"flex",alignItems:"center",mb:4},children:[e.jsx(p,{startIcon:e.jsx(X,{}),onClick:()=>A("/admin"),sx:{mr:2},children:"Назад"}),e.jsx(Z,{sx:{mr:2,fontSize:32,color:"primary.main"}}),e.jsxs(c,{children:[e.jsx(t,{variant:"h4",component:"h1",fontWeight:"bold",children:"Управление студентами"}),e.jsx(t,{variant:"body1",color:"text.secondary",children:"Управление учащимися автошколы и их прогрессом"})]})]}),e.jsxs(l,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(l,{item:!0,xs:12,sm:6,md:3,children:e.jsx(b,{children:e.jsxs(y,{children:[e.jsx(t,{color:"text.secondary",gutterBottom:!0,children:"Всего студентов"}),e.jsx(t,{variant:"h4",color:"primary",children:f.total})]})})}),e.jsx(l,{item:!0,xs:12,sm:6,md:3,children:e.jsx(b,{children:e.jsxs(y,{children:[e.jsx(t,{color:"text.secondary",gutterBottom:!0,children:"Обучаются"}),e.jsx(t,{variant:"h4",color:"primary.main",children:f.active})]})})}),e.jsx(l,{item:!0,xs:12,sm:6,md:3,children:e.jsx(b,{children:e.jsxs(y,{children:[e.jsx(t,{color:"text.secondary",gutterBottom:!0,children:"Завершили"}),e.jsx(t,{variant:"h4",color:"success.main",children:f.completed})]})})}),e.jsx(l,{item:!0,xs:12,sm:6,md:3,children:e.jsx(b,{children:e.jsxs(y,{children:[e.jsx(t,{color:"text.secondary",gutterBottom:!0,children:"Средний прогресс"}),e.jsxs(t,{variant:"h4",color:"info.main",children:[f.avgProgress,"%"]})]})})})]}),e.jsx(c,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:e.jsxs(_,{value:C,onChange:O,children:[e.jsx(H,{label:"Все"}),e.jsx(H,{label:"Обучаются"}),e.jsx(H,{label:"Завершили"}),e.jsx(H,{label:"Проблемные"})]})}),e.jsx($,{sx:{width:"100%",overflow:"hidden"},children:e.jsx(q,{children:e.jsxs(Q,{children:[e.jsx(U,{children:e.jsxs(S,{children:[e.jsx(a,{children:"Студент"}),e.jsx(a,{children:"Курс"}),e.jsx(a,{children:"Инструктор"}),e.jsx(a,{children:"Прогресс"}),e.jsx(a,{children:"Часы обучения"}),e.jsx(a,{children:"Дата записи"}),e.jsx(a,{children:"Статус"}),e.jsx(a,{align:"center",children:"Действия"})]})}),e.jsx(Y,{children:M().map(r=>e.jsxs(S,{hover:!0,children:[e.jsx(a,{children:e.jsxs(c,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(ee,{sx:{mr:2,bgcolor:"primary.main"},children:r.name.split(" ").map(i=>i[0]).join("")}),e.jsxs(c,{children:[e.jsx(t,{variant:"subtitle2",fontWeight:"medium",children:r.name}),e.jsx(t,{variant:"body2",color:"text.secondary",children:r.phone})]})]})}),e.jsx(a,{children:r.course}),e.jsx(a,{children:r.instructor}),e.jsx(a,{children:e.jsxs(c,{sx:{width:"100%"},children:[e.jsx(c,{sx:{display:"flex",alignItems:"center",mb:1},children:e.jsxs(t,{variant:"body2",color:"text.secondary",children:[r.progress,"%"]})}),e.jsx(re,{variant:"determinate",value:r.progress,sx:{height:8,borderRadius:4}})]})}),e.jsxs(a,{children:[e.jsxs(t,{variant:"body2",children:["Теория: ",r.theoryHours,"/",r.totalTheoryHours]}),e.jsxs(t,{variant:"body2",children:["Практика: ",r.practiceHours,"/",r.totalPracticeHours]})]}),e.jsx(a,{children:r.enrollDate}),e.jsx(a,{children:e.jsx(se,{label:G(r.status),size:"small",color:R(r.status)})}),e.jsxs(a,{align:"center",children:[e.jsx(D,{size:"small",onClick:()=>L(r),title:"Редактировать",children:e.jsx(te,{})}),e.jsx(D,{size:"small",onClick:()=>V(r),title:"Удалить",color:"error",children:e.jsx(ae,{})})]})]},r.id))})]})})}),e.jsx(le,{color:"primary","aria-label":"add",sx:{position:"fixed",bottom:24,right:24},onClick:()=>{m(null),o({name:"",phone:"",email:"",course:"Категория B",status:"active",instructor:"",theoryHours:0,practiceHours:0}),j(!0)},children:e.jsx(ne,{})}),e.jsxs(T,{open:F,onClose:()=>j(!1),maxWidth:"md",fullWidth:!0,children:[e.jsx(B,{children:h?"Редактировать студента":"Добавить нового студента"}),e.jsx(W,{children:e.jsx(c,{sx:{pt:2},children:e.jsxs(l,{container:!0,spacing:3,children:[e.jsx(l,{item:!0,xs:12,children:e.jsx(x,{fullWidth:!0,label:"ФИО",value:s.name,onChange:r=>o({...s,name:r.target.value})})}),e.jsx(l,{item:!0,xs:12,sm:6,children:e.jsx(x,{fullWidth:!0,label:"Телефон",value:s.phone,onChange:r=>o({...s,phone:r.target.value})})}),e.jsx(l,{item:!0,xs:12,sm:6,children:e.jsx(x,{fullWidth:!0,label:"Email",type:"email",value:s.email,onChange:r=>o({...s,email:r.target.value})})}),e.jsx(l,{item:!0,xs:12,sm:6,children:e.jsxs(w,{fullWidth:!0,children:[e.jsx(I,{children:"Курс"}),e.jsxs(k,{value:s.course,label:"Курс",onChange:r=>o({...s,course:r.target.value}),children:[e.jsx(d,{value:"Категория A",children:"Категория A"}),e.jsx(d,{value:"Категория B",children:"Категория B"}),e.jsx(d,{value:"Категория C",children:"Категория C"}),e.jsx(d,{value:"Категория D",children:"Категория D"})]})]})}),e.jsx(l,{item:!0,xs:12,sm:6,children:e.jsxs(w,{fullWidth:!0,children:[e.jsx(I,{children:"Статус"}),e.jsxs(k,{value:s.status,label:"Статус",onChange:r=>o({...s,status:r.target.value}),children:[e.jsx(d,{value:"active",children:"Обучается"}),e.jsx(d,{value:"completed",children:"Завершил"}),e.jsx(d,{value:"suspended",children:"Приостановлен"}),e.jsx(d,{value:"dropped",children:"Отчислен"})]})]})}),e.jsx(l,{item:!0,xs:12,children:e.jsx(x,{fullWidth:!0,label:"Инструктор",value:s.instructor,onChange:r=>o({...s,instructor:r.target.value})})}),e.jsx(l,{item:!0,xs:12,sm:6,children:e.jsx(x,{fullWidth:!0,label:"Часы теории",type:"number",value:s.theoryHours,onChange:r=>o({...s,theoryHours:parseInt(r.target.value)||0})})}),e.jsx(l,{item:!0,xs:12,sm:6,children:e.jsx(x,{fullWidth:!0,label:"Часы практики",type:"number",value:s.practiceHours,onChange:r=>o({...s,practiceHours:parseInt(r.target.value)||0})})})]})})}),e.jsxs(P,{children:[e.jsx(p,{onClick:()=>j(!1),startIcon:e.jsx(oe,{}),children:"Отмена"}),e.jsx(p,{onClick:J,variant:"contained",startIcon:e.jsx(ie,{}),children:"Сохранить"})]})]}),e.jsxs(T,{open:z,onClose:()=>v(!1),children:[e.jsx(B,{children:"Подтверждение удаления"}),e.jsxs(W,{children:[e.jsx(ce,{severity:"warning",sx:{mb:2},children:"Это действие нельзя отменить!"}),e.jsxs(t,{children:['Вы уверены, что хотите удалить студента "',h?.name,'"?']})]}),e.jsxs(P,{children:[e.jsx(p,{onClick:()=>v(!1),children:"Отмена"}),e.jsx(p,{onClick:K,color:"error",variant:"contained",children:"Удалить"})]})]})]})]})};export{ve as default};
//# sourceMappingURL=index-a311c629.js.map
