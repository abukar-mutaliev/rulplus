import{j as e,C as se,B as f,e as k,ah as te,ac as re,T as i,aF as ne,ap as ae,o as W,ai as ie,aj as I,G as t,f as h,h as x,_ as r,$ as le,a0 as oe,a1 as ce,a2 as D,aG as de,ay as L,az as j,aA as m,aH as g,aI as p,m as he,aJ as $,W as xe,X as ue,Z as je,ae as H,af as E,ag as R,V,a3 as me}from"./ui-4acb94fb.js";import{r as d}from"./vendor-c1fc8f85.js";import{W as ge}from"./index-41294929.js";import{b as pe}from"./router-7ed49354.js";import"./utils-4719f846.js";import"./query-956dc969.js";const Se=()=>{const J=pe(),[v,X]=d.useState(0),[F,A]=d.useState(""),[G,z]=d.useState(""),[Y,T]=d.useState(!1),[c,M]=d.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[y,Z]=d.useState({current:!1,new:!1,confirm:!1}),[q,u]=d.useState(""),[n,w]=d.useState({schoolName:"РУЛЬ+",slogan:"СЕЛ — ПОЕХАЛ",address:"г. Назрань, ул. Московская, 123",phone:"+79286970697",email:"info@rulplus.ru",website:"https://rulplus.ru",workingHours:"9:00 - 18:00",timezone:"Europe/Moscow"}),[l,b]=d.useState({emailNotifications:!0,smsNotifications:!1,pushNotifications:!0,examReminders:!0,paymentReminders:!0,maintenanceAlerts:!0}),[a,C]=d.useState({sessionTimeout:30,passwordMinLength:8,requireSpecialChars:!0,twoFactorAuth:!1,loginAttempts:5,ipWhitelist:!1}),[o,S]=d.useState({theoryHours:40,practiceHours:20,examAttempts:3,certificateValidityDays:365,minAge:18,maxStudentsPerInstructor:15}),_=(s,P)=>{X(P)},K=()=>{A("Настройки успешно сохранены!"),setTimeout(()=>A(""),3e3)},Q=()=>{window.confirm("Вы уверены, что хотите сбросить все настройки к значениям по умолчанию?")&&(A("Настройки сброшены к значениям по умолчанию"),setTimeout(()=>A(""),3e3))},B=s=>P=>{M(ee=>({...ee,[s]:P.target.value})),u("")},N=s=>{Z(P=>({...P,[s]:!P[s]}))},U=async()=>{if(u(""),!c.currentPassword||!c.newPassword||!c.confirmPassword){u("Все поля должны быть заполнены");return}if(c.newPassword!==c.confirmPassword){u("Новые пароли не совпадают");return}if(c.newPassword.length<a.passwordMinLength){u(`Пароль должен содержать минимум ${a.passwordMinLength} символов`);return}if(a.requireSpecialChars&&!/[!@#$%^&*(),.?":{}|<>]/.test(c.newPassword)){u("Пароль должен содержать специальные символы");return}if(c.currentPassword!=="rulplus2024"){u("Неверный текущий пароль");return}try{await new Promise(s=>setTimeout(s,1e3)),z("Пароль успешно изменен!"),T(!1),M({currentPassword:"",newPassword:"",confirmPassword:""}),setTimeout(()=>z(""),3e3)}catch{u("Ошибка при изменении пароля. Попробуйте снова.")}},O=()=>{T(!1),M({currentPassword:"",newPassword:"",confirmPassword:""}),u("")};return e.jsxs(e.Fragment,{children:[e.jsxs(ge,{children:[e.jsx("title",{children:"Настройки системы - РУЛЬ+ Админ"}),e.jsx("meta",{name:"robots",content:"noindex,nofollow"})]}),e.jsxs(se,{maxWidth:"xl",sx:{py:4},children:[e.jsxs(f,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:4},children:[e.jsxs(f,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(k,{startIcon:e.jsx(te,{}),onClick:()=>J("/admin"),sx:{mr:2},children:"Назад"}),e.jsx(re,{sx:{mr:2,fontSize:32,color:"primary.main"}}),e.jsxs(f,{children:[e.jsx(i,{variant:"h4",component:"h1",fontWeight:"bold",children:"Настройки системы"}),e.jsx(i,{variant:"body1",color:"text.secondary",children:"Конфигурация и управление системой автошколы"})]})]}),e.jsxs(f,{children:[e.jsx(k,{variant:"outlined",startIcon:e.jsx(ne,{}),onClick:Q,sx:{mr:2},children:"Сбросить"}),e.jsx(k,{variant:"contained",startIcon:e.jsx(ae,{}),onClick:K,children:"Сохранить"})]})]}),F&&e.jsx(W,{severity:"success",sx:{mb:3},children:F}),G&&e.jsx(W,{severity:"success",sx:{mb:3},children:G}),e.jsx(f,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:e.jsxs(ie,{value:v,onChange:_,children:[e.jsx(I,{label:"Общие"}),e.jsx(I,{label:"Уведомления"}),e.jsx(I,{label:"Безопасность"}),e.jsx(I,{label:"Курсы"}),e.jsx(I,{label:"Интеграции"})]})}),v===0&&e.jsxs(t,{container:!0,spacing:3,children:[e.jsx(t,{item:!0,xs:12,md:6,children:e.jsx(h,{children:e.jsxs(x,{children:[e.jsx(i,{variant:"h6",gutterBottom:!0,children:"Основная информация"}),e.jsxs(t,{container:!0,spacing:3,children:[e.jsx(t,{item:!0,xs:12,children:e.jsx(r,{fullWidth:!0,label:"Название автошколы",value:n.schoolName,onChange:s=>w({...n,schoolName:s.target.value})})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(r,{fullWidth:!0,label:"Слоган",value:n.slogan,onChange:s=>w({...n,slogan:s.target.value})})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(r,{fullWidth:!0,label:"Адрес",multiline:!0,rows:2,value:n.address,onChange:s=>w({...n,address:s.target.value})})}),e.jsx(t,{item:!0,xs:12,sm:6,children:e.jsx(r,{fullWidth:!0,label:"Телефон",value:n.phone,onChange:s=>w({...n,phone:s.target.value})})}),e.jsx(t,{item:!0,xs:12,sm:6,children:e.jsx(r,{fullWidth:!0,label:"Email",type:"email",value:n.email,onChange:s=>w({...n,email:s.target.value})})})]})]})})}),e.jsx(t,{item:!0,xs:12,md:6,children:e.jsx(h,{children:e.jsxs(x,{children:[e.jsx(i,{variant:"h6",gutterBottom:!0,children:"Рабочие параметры"}),e.jsxs(t,{container:!0,spacing:3,children:[e.jsx(t,{item:!0,xs:12,children:e.jsx(r,{fullWidth:!0,label:"Веб-сайт",value:n.website,onChange:s=>w({...n,website:s.target.value})})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(r,{fullWidth:!0,label:"Рабочие часы",value:n.workingHours,onChange:s=>w({...n,workingHours:s.target.value})})}),e.jsx(t,{item:!0,xs:12,children:e.jsxs(le,{fullWidth:!0,children:[e.jsx(oe,{children:"Часовой пояс"}),e.jsxs(ce,{value:n.timezone,label:"Часовой пояс",onChange:s=>w({...n,timezone:s.target.value}),children:[e.jsx(D,{value:"Europe/Moscow",children:"Москва (GMT+3)"}),e.jsx(D,{value:"Europe/Samara",children:"Самара (GMT+4)"}),e.jsx(D,{value:"Asia/Yekaterinburg",children:"Екатеринбург (GMT+5)"})]})]})})]})]})})})]}),v===1&&e.jsxs(t,{container:!0,spacing:3,children:[e.jsx(t,{item:!0,xs:12,md:6,children:e.jsx(h,{children:e.jsxs(x,{children:[e.jsxs(i,{variant:"h6",gutterBottom:!0,children:[e.jsx(de,{sx:{mr:1,verticalAlign:"middle"}}),"Типы уведомлений"]}),e.jsxs(L,{children:[e.jsxs(j,{children:[e.jsx(m,{primary:"Email уведомления",secondary:"Отправка писем на электронную почту"}),e.jsx(g,{children:e.jsx(p,{checked:l.emailNotifications,onChange:s=>b({...l,emailNotifications:s.target.checked})})})]}),e.jsxs(j,{children:[e.jsx(m,{primary:"SMS уведомления",secondary:"Отправка SMS сообщений"}),e.jsx(g,{children:e.jsx(p,{checked:l.smsNotifications,onChange:s=>b({...l,smsNotifications:s.target.checked})})})]}),e.jsxs(j,{children:[e.jsx(m,{primary:"Push уведомления",secondary:"Уведомления в браузере"}),e.jsx(g,{children:e.jsx(p,{checked:l.pushNotifications,onChange:s=>b({...l,pushNotifications:s.target.checked})})})]})]})]})})}),e.jsx(t,{item:!0,xs:12,md:6,children:e.jsx(h,{children:e.jsxs(x,{children:[e.jsx(i,{variant:"h6",gutterBottom:!0,children:"События для уведомлений"}),e.jsxs(L,{children:[e.jsxs(j,{children:[e.jsx(m,{primary:"Напоминания об экзаменах"}),e.jsx(g,{children:e.jsx(p,{checked:l.examReminders,onChange:s=>b({...l,examReminders:s.target.checked})})})]}),e.jsxs(j,{children:[e.jsx(m,{primary:"Напоминания об оплате"}),e.jsx(g,{children:e.jsx(p,{checked:l.paymentReminders,onChange:s=>b({...l,paymentReminders:s.target.checked})})})]}),e.jsxs(j,{children:[e.jsx(m,{primary:"Уведомления о ТО автомобилей"}),e.jsx(g,{children:e.jsx(p,{checked:l.maintenanceAlerts,onChange:s=>b({...l,maintenanceAlerts:s.target.checked})})})]})]})]})})})]}),v===2&&e.jsxs(t,{container:!0,spacing:3,children:[e.jsx(t,{item:!0,xs:12,md:6,children:e.jsx(h,{children:e.jsxs(x,{children:[e.jsxs(i,{variant:"h6",gutterBottom:!0,children:[e.jsx(he,{sx:{mr:1,verticalAlign:"middle"}}),"Политики безопасности"]}),e.jsxs(t,{container:!0,spacing:3,children:[e.jsx(t,{item:!0,xs:12,children:e.jsx(r,{fullWidth:!0,label:"Время сессии (минуты)",type:"number",value:a.sessionTimeout,onChange:s=>C({...a,sessionTimeout:parseInt(s.target.value)})})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(r,{fullWidth:!0,label:"Минимальная длина пароля",type:"number",value:a.passwordMinLength,onChange:s=>C({...a,passwordMinLength:parseInt(s.target.value)})})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(r,{fullWidth:!0,label:"Максимум попыток входа",type:"number",value:a.loginAttempts,onChange:s=>C({...a,loginAttempts:parseInt(s.target.value)})})})]})]})})}),e.jsx(t,{item:!0,xs:12,md:6,children:e.jsx(h,{children:e.jsxs(x,{children:[e.jsx(i,{variant:"h6",gutterBottom:!0,children:"Дополнительная защита"}),e.jsxs(L,{children:[e.jsxs(j,{children:[e.jsx(m,{primary:"Требовать специальные символы в пароле"}),e.jsx(g,{children:e.jsx(p,{checked:a.requireSpecialChars,onChange:s=>C({...a,requireSpecialChars:s.target.checked})})})]}),e.jsxs(j,{children:[e.jsx(m,{primary:"Двухфакторная аутентификация"}),e.jsx(g,{children:e.jsx(p,{checked:a.twoFactorAuth,onChange:s=>C({...a,twoFactorAuth:s.target.checked})})})]}),e.jsxs(j,{children:[e.jsx(m,{primary:"Белый список IP адресов"}),e.jsx(g,{children:e.jsx(p,{checked:a.ipWhitelist,onChange:s=>C({...a,ipWhitelist:s.target.checked})})})]})]})]})})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(h,{children:e.jsx(x,{children:e.jsxs(f,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(f,{children:[e.jsxs(i,{variant:"h6",gutterBottom:!0,children:[e.jsx($,{sx:{mr:1,verticalAlign:"middle"}}),"Изменение пароля администратора"]}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Измените пароль для входа в админ-панель. Рекомендуется использовать сложный пароль."})]}),e.jsx(k,{variant:"contained",startIcon:e.jsx($,{}),onClick:()=>T(!0),sx:{minWidth:200},children:"Изменить пароль"})]})})})})]}),v===3&&e.jsxs(t,{container:!0,spacing:3,children:[e.jsx(t,{item:!0,xs:12,md:6,children:e.jsx(h,{children:e.jsxs(x,{children:[e.jsx(i,{variant:"h6",gutterBottom:!0,children:"Параметры обучения"}),e.jsxs(t,{container:!0,spacing:3,children:[e.jsx(t,{item:!0,xs:12,sm:6,children:e.jsx(r,{fullWidth:!0,label:"Часы теории",type:"number",value:o.theoryHours,onChange:s=>S({...o,theoryHours:parseInt(s.target.value)})})}),e.jsx(t,{item:!0,xs:12,sm:6,children:e.jsx(r,{fullWidth:!0,label:"Часы практики",type:"number",value:o.practiceHours,onChange:s=>S({...o,practiceHours:parseInt(s.target.value)})})}),e.jsx(t,{item:!0,xs:12,sm:6,children:e.jsx(r,{fullWidth:!0,label:"Попытки сдачи экзамена",type:"number",value:o.examAttempts,onChange:s=>S({...o,examAttempts:parseInt(s.target.value)})})}),e.jsx(t,{item:!0,xs:12,sm:6,children:e.jsx(r,{fullWidth:!0,label:"Минимальный возраст",type:"number",value:o.minAge,onChange:s=>S({...o,minAge:parseInt(s.target.value)})})})]})]})})}),e.jsx(t,{item:!0,xs:12,md:6,children:e.jsx(h,{children:e.jsxs(x,{children:[e.jsx(i,{variant:"h6",gutterBottom:!0,children:"Ограничения и сроки"}),e.jsxs(t,{container:!0,spacing:3,children:[e.jsx(t,{item:!0,xs:12,children:e.jsx(r,{fullWidth:!0,label:"Срок действия справки (дни)",type:"number",value:o.certificateValidityDays,onChange:s=>S({...o,certificateValidityDays:parseInt(s.target.value)})})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(r,{fullWidth:!0,label:"Макс. студентов на инструктора",type:"number",value:o.maxStudentsPerInstructor,onChange:s=>S({...o,maxStudentsPerInstructor:parseInt(s.target.value)})})})]})]})})})]}),v===4&&e.jsx(t,{container:!0,spacing:3,children:e.jsx(t,{item:!0,xs:12,children:e.jsx(h,{children:e.jsxs(x,{children:[e.jsx(i,{variant:"h6",gutterBottom:!0,children:"Внешние интеграции"}),e.jsx(W,{severity:"info",sx:{mb:3},children:"Здесь можно настроить интеграции с внешними сервисами: платежные системы, SMS-сервисы, электронная отчетность и др."}),e.jsx(i,{variant:"body1",color:"text.secondary",children:"Функционал интеграций будет добавлен в следующих версиях системы."})]})})})})]}),e.jsxs(xe,{open:Y,onClose:O,children:[e.jsx(ue,{children:"Изменение пароля администратора"}),e.jsx(je,{children:e.jsxs(t,{container:!0,spacing:2,children:[e.jsx(t,{item:!0,xs:12,children:e.jsx(r,{fullWidth:!0,label:"Текущий пароль",type:y.current?"text":"password",value:c.currentPassword,onChange:B("currentPassword"),InputProps:{endAdornment:e.jsx(H,{position:"end",children:e.jsx(E,{onClick:()=>N("current"),edge:"end",children:y.current?e.jsx(R,{}):e.jsx(V,{})})})}})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(r,{fullWidth:!0,label:"Новый пароль",type:y.new?"text":"password",value:c.newPassword,onChange:B("newPassword"),InputProps:{endAdornment:e.jsx(H,{position:"end",children:e.jsx(E,{onClick:()=>N("new"),edge:"end",children:y.new?e.jsx(R,{}):e.jsx(V,{})})})}})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(r,{fullWidth:!0,label:"Подтверждение нового пароля",type:y.confirm?"text":"password",value:c.confirmPassword,onChange:B("confirmPassword"),InputProps:{endAdornment:e.jsx(H,{position:"end",children:e.jsx(E,{onClick:()=>N("confirm"),edge:"end",children:y.confirm?e.jsx(R,{}):e.jsx(V,{})})})}})}),q&&e.jsx(t,{item:!0,xs:12,children:e.jsx(W,{severity:"error",sx:{mt:2},children:q})})]})}),e.jsxs(me,{children:[e.jsx(k,{onClick:O,color:"primary",children:"Отмена"}),e.jsx(k,{onClick:U,variant:"contained",color:"primary",children:"Изменить пароль"})]})]})]})};export{Se as default};
//# sourceMappingURL=index-2445703e.js.map
