import{j as e,W as F,X as L,B as o,O as A,T as s,e as P,Y as U,Z as O,o as I,g as f,G as r,v as z,_ as u,$ as E,a0 as $,a1 as H,a2 as M,P as R,a3 as _,a as q,a4 as G,C as J,f as p,h as g,a5 as V,y as K,i as X,z as Y,F as Z,H as N,J as h,K as Q,x as ee,a6 as te,n as se}from"./ui-4acb94fb.js";import{W as re}from"./index-41294929.js";import{r as b}from"./vendor-c1fc8f85.js";import"./utils-4719f846.js";import"./router-7ed49354.js";import"./query-956dc969.js";const ae=({open:B,onClose:y,program:m})=>{const[i,l]=b.useState({firstName:"",lastName:"",middleName:"",phone:"",email:"",birthDate:"",programId:m?.id||0,preferredStartDate:"",additionalInfo:""}),[d,j]=b.useState({}),[c,C]=b.useState(!1),[t,n]=b.useState(null),x=a=>v=>{const T=v.target.value;l(S=>({...S,[a]:T})),d[a]&&j(S=>({...S,[a]:""}))},W=()=>{const a={};i.firstName.trim()||(a.firstName="Обязательное поле"),i.lastName.trim()||(a.lastName="Обязательное поле"),i.phone.trim()||(a.phone="Обязательное поле"),i.email.trim()||(a.email="Обязательное поле"),i.birthDate||(a.birthDate="Обязательное поле"),i.programId||(a.programId="Выберите программу обучения");const v=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;i.email&&!v.test(i.email)&&(a.email="Введите корректный email");const T=/^(\+7|8)?[\s\-]?\(?[489][0-9]{2}\)?[\s\-]?[0-9]{3}[\s\-]?[0-9]{2}[\s\-]?[0-9]{2}$/;return i.phone&&!T.test(i.phone.replace(/\s/g,""))&&(a.phone="Введите корректный номер телефона"),j(a),Object.keys(a).length===0},w=async()=>{if(W()){C(!0),n(null);try{const a=await fetch(`${{}.VITE_API_URL||"http://localhost:5000"}/api/applications/submit`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),v=await a.json();a.ok?(n({type:"success",text:"Заявка успешно отправлена! Мы свяжемся с вами в ближайшее время."}),setTimeout(()=>{y(),l({firstName:"",lastName:"",middleName:"",phone:"",email:"",birthDate:"",programId:m?.id||0,preferredStartDate:"",additionalInfo:""}),n(null)},3e3)):n({type:"error",text:v.message||"Ошибка при отправке заявки. Попробуйте снова."})}catch(a){console.error("Ошибка отправки заявки:",a),n({type:"error",text:"Ошибка соединения. Проверьте интернет-соединение и попробуйте снова."})}finally{C(!1)}}},D=()=>{c||(y(),l({firstName:"",lastName:"",middleName:"",phone:"",email:"",birthDate:"",programId:m?.id||0,preferredStartDate:"",additionalInfo:""}),j({}),n(null))},k=[{id:1,category:"B",name:"Категория B - Легковые автомобили",cost:35e3},{id:2,category:"A",name:"Категория A - Мотоциклы",cost:25e3},{id:3,category:"C",name:"Категория C - Грузовые автомобили",cost:45e3}];return e.jsxs(F,{open:B,onClose:D,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{borderRadius:2,maxHeight:"90vh"}},children:[e.jsxs(L,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid",borderColor:"divider",pb:2},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(A,{sx:{mr:1,color:"primary.main"}}),e.jsx(s,{variant:"h6",children:"Заявка на обучение"})]}),e.jsx(P,{onClick:D,disabled:c,sx:{minWidth:"auto",p:.5},children:e.jsx(U,{})})]}),e.jsxs(O,{sx:{pt:3},children:[t&&e.jsx(I,{severity:t.type,sx:{mb:3},children:t.text}),m&&e.jsxs(o,{sx:{mb:3,p:2,bgcolor:"primary.light",borderRadius:1},children:[e.jsx(s,{variant:"subtitle1",gutterBottom:!0,children:e.jsx("strong",{children:"Выбранная программа:"})}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(f,{label:`Категория ${m.category}`,color:"primary",size:"small"}),e.jsxs(s,{variant:"body2",color:"text.primary",children:[m.cost.toLocaleString("ru-RU")," ₽"]})]}),e.jsx(s,{variant:"body2",color:"text.primary",children:m.name})]}),e.jsxs(r,{container:!0,spacing:3,children:[e.jsx(r,{item:!0,xs:12,children:e.jsxs(s,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center"},children:[e.jsx(z,{sx:{mr:1,fontSize:"1.2rem"}}),"Личные данные"]})}),e.jsx(r,{item:!0,xs:12,sm:4,children:e.jsx(u,{fullWidth:!0,label:"Фамилия *",value:i.lastName,onChange:x("lastName"),error:!!d.lastName,helperText:d.lastName,disabled:c})}),e.jsx(r,{item:!0,xs:12,sm:4,children:e.jsx(u,{fullWidth:!0,label:"Имя *",value:i.firstName,onChange:x("firstName"),error:!!d.firstName,helperText:d.firstName,disabled:c})}),e.jsx(r,{item:!0,xs:12,sm:4,children:e.jsx(u,{fullWidth:!0,label:"Отчество",value:i.middleName,onChange:x("middleName"),disabled:c})}),e.jsx(r,{item:!0,xs:12,sm:6,children:e.jsx(u,{fullWidth:!0,label:"Дата рождения *",type:"date",value:i.birthDate,onChange:x("birthDate"),error:!!d.birthDate,helperText:d.birthDate,disabled:c,InputLabelProps:{shrink:!0}})}),e.jsx(r,{item:!0,xs:12,sm:6,children:e.jsxs(E,{fullWidth:!0,error:!!d.programId,disabled:c,children:[e.jsx($,{children:"Программа обучения *"}),e.jsx(H,{value:i.programId,onChange:x("programId"),label:"Программа обучения *",children:k.map(a=>e.jsxs(M,{value:a.id,children:[a.name," (",a.cost.toLocaleString("ru-RU")," ₽)"]},a.id))})]})}),e.jsx(r,{item:!0,xs:12,children:e.jsxs(s,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",mt:2},children:[e.jsx(R,{sx:{mr:1,fontSize:"1.2rem"}}),"Контактная информация"]})}),e.jsx(r,{item:!0,xs:12,sm:6,children:e.jsx(u,{fullWidth:!0,label:"Телефон *",value:i.phone,onChange:x("phone"),error:!!d.phone,helperText:d.phone||"Формат: +7 (999) 123-45-67",disabled:c,placeholder:"+7 (999) 123-45-67"})}),e.jsx(r,{item:!0,xs:12,sm:6,children:e.jsx(u,{fullWidth:!0,label:"Email *",type:"email",value:i.email,onChange:x("email"),error:!!d.email,helperText:d.email,disabled:c})}),e.jsx(r,{item:!0,xs:12,sm:6,children:e.jsx(u,{fullWidth:!0,label:"Желаемая дата начала обучения",type:"date",value:i.preferredStartDate,onChange:x("preferredStartDate"),disabled:c,InputLabelProps:{shrink:!0}})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(u,{fullWidth:!0,label:"Дополнительная информация",multiline:!0,rows:3,value:i.additionalInfo,onChange:x("additionalInfo"),disabled:c,placeholder:"Укажите дополнительную информацию, если необходимо..."})})]}),e.jsx(I,{severity:"info",sx:{mt:3},children:e.jsxs(s,{variant:"body2",children:[e.jsx("strong",{children:"Важно:"})," После отправки заявки мы свяжемся с вами для уточнения деталей и согласования времени для подачи документов."]})})]}),e.jsxs(_,{sx:{p:3,pt:2},children:[e.jsx(P,{onClick:D,disabled:c,color:"inherit",children:"Отмена"}),e.jsx(P,{onClick:w,variant:"contained",disabled:c,startIcon:c?e.jsx(q,{size:20}):e.jsx(G,{}),children:c?"Отправка...":"Отправить заявку"})]})]})},xe=()=>{const[B,y]=b.useState(!1),[m,i]=b.useState(null),l={currentPeriod:"2024 учебный год",lastUpdated:new Date().toISOString(),programs:[{id:1,category:"B",name:'Профессиональная подготовка водителей транспортных средств категории "B"',totalPlaces:120,occupiedPlaces:85,vacantPlaces:35,duration:"2.5 месяца",cost:35e3,startDates:["2024-03-15","2024-04-01","2024-04-15","2024-05-01"],schedule:"Утренние и вечерние группы"},{id:2,category:"A",name:'Профессиональная подготовка водителей транспортных средств категории "A"',totalPlaces:40,occupiedPlaces:28,vacantPlaces:12,duration:"2 месяца",cost:25e3,startDates:["2024-04-01","2024-05-15","2024-07-01"],schedule:"Сезонные группы (март-октябрь)"},{id:3,category:"C",name:'Профессиональная подготовка водителей транспортных средств категории "C"',totalPlaces:60,occupiedPlaces:42,vacantPlaces:18,duration:"3 месяца",cost:45e3,startDates:["2024-04-01","2024-05-01","2024-06-01"],schedule:"Утренние и вечерние группы"}],admissionRequirements:["Достижение установленного возраста (16 лет для категории A, 17 лет для категории B, 18 лет для категории C)","Медицинская справка установленного образца","Документ, удостоверяющий личность","Справка о несудимости (для категории C)","Заключение договора и оплата обучения"],documents:["Паспорт гражданина РФ или иной документ, удостоверяющий личность","Медицинская справка формы 003-В/у","Фотографии 3x4 см (4 шт.)","СНИЛС","Справка о несудимости (для кат. C)"],admissionProcedure:["Подача заявления и документов","Заключение договора на оказание образовательных услуг","Оплата обучения (возможна рассрочка)","Формирование учебной группы","Начало обучения согласно расписанию"],contacts:{phone:"+7 (928) 697-06-97",email:"amurklan@mail.ru",address:"123456, г. Назрань, ул. Примерная, д. 123, оф. 45",workTime:"Пн-Пт: 09:00-18:00, Сб: 10:00-16:00"}},d=(t,n)=>{const x=t/n*100;return x>50?"success":x>20?"warning":"error"},j=t=>new Date(t).toLocaleDateString("ru-RU"),c=t=>{i(t),y(!0)},C=()=>{y(!1),i(null)};return e.jsxs(e.Fragment,{children:[e.jsxs(re,{children:[e.jsx("title",{children:"Вакантные места для приема - Автошкола Драйв"}),e.jsx("meta",{name:"description",content:"Вакантные места для приема на обучение в автошколе: количество свободных мест по программам подготовки водителей категорий A, B, C."})]}),e.jsxs(J,{maxWidth:"lg",sx:{py:4},children:[e.jsxs(o,{sx:{mb:4},children:[e.jsx(s,{variant:"h3",component:"h1",gutterBottom:!0,children:"Вакантные места для приема обучающихся"}),e.jsx(s,{variant:"body1",color:"text.secondary",children:"Информация о количестве вакантных мест для приема на обучение по образовательным программам профессиональной подготовки водителей транспортных средств"})]}),e.jsxs(I,{severity:"info",sx:{mb:4},children:[e.jsxs(s,{variant:"body1",gutterBottom:!0,children:[e.jsx("strong",{children:"Учебный период:"})," ",l.currentPeriod]}),e.jsxs(s,{variant:"body2",children:["Данные обновляются еженедельно. Последнее обновление: ",j(l.lastUpdated)]})]}),e.jsx(p,{sx:{mb:4},children:e.jsxs(g,{children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(V,{sx:{mr:2,color:"primary.main"}}),e.jsx(s,{variant:"h5",component:"h2",children:"Общая статистика по вакантным местам"})]}),e.jsxs(r,{container:!0,spacing:3,children:[e.jsx(r,{item:!0,xs:12,md:4,children:e.jsxs(o,{sx:{textAlign:"center",p:3,bgcolor:"primary.light",borderRadius:2},children:[e.jsx(s,{variant:"h2",color:"primary.contrastText",gutterBottom:!0,children:l.programs.reduce((t,n)=>t+n.totalPlaces,0)}),e.jsx(s,{variant:"h6",color:"primary.contrastText",children:"Общее количество мест"})]})}),e.jsx(r,{item:!0,xs:12,md:4,children:e.jsxs(o,{sx:{textAlign:"center",p:3,bgcolor:"warning.light",borderRadius:2},children:[e.jsx(s,{variant:"h2",color:"warning.contrastText",gutterBottom:!0,children:l.programs.reduce((t,n)=>t+n.occupiedPlaces,0)}),e.jsx(s,{variant:"h6",color:"warning.contrastText",children:"Занято мест"})]})}),e.jsx(r,{item:!0,xs:12,md:4,children:e.jsxs(o,{sx:{textAlign:"center",p:3,bgcolor:"success.light",borderRadius:2},children:[e.jsx(s,{variant:"h2",color:"success.contrastText",gutterBottom:!0,children:l.programs.reduce((t,n)=>t+n.vacantPlaces,0)}),e.jsx(s,{variant:"h6",color:"success.contrastText",children:"Свободных мест"})]})})]})]})}),e.jsx(p,{sx:{mb:4},children:e.jsxs(g,{children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(A,{sx:{mr:2,color:"primary.main"}}),e.jsx(s,{variant:"h5",component:"h2",children:"Вакантные места по образовательным программам"})]}),e.jsx(K,{component:X,variant:"outlined",children:e.jsxs(Y,{children:[e.jsx(Z,{children:e.jsxs(N,{children:[e.jsx(h,{children:e.jsx("strong",{children:"Категория"})}),e.jsx(h,{children:e.jsx("strong",{children:"Всего мест"})}),e.jsx(h,{children:e.jsx("strong",{children:"Занято"})}),e.jsx(h,{children:e.jsx("strong",{children:"Свободно"})}),e.jsx(h,{children:e.jsx("strong",{children:"Стоимость"})}),e.jsx(h,{children:e.jsx("strong",{children:"Длительность"})}),e.jsx(h,{children:e.jsx("strong",{children:"Статус"})})]})}),e.jsx(Q,{children:l.programs.map(t=>e.jsxs(N,{children:[e.jsx(h,{children:e.jsx(f,{label:t.category,color:"primary"})}),e.jsx(h,{children:t.totalPlaces}),e.jsx(h,{children:t.occupiedPlaces}),e.jsx(h,{children:e.jsx(s,{variant:"body1",fontWeight:"bold",color:"success.main",children:t.vacantPlaces})}),e.jsxs(h,{children:[t.cost.toLocaleString("ru-RU")," ₽"]}),e.jsx(h,{children:t.duration}),e.jsx(h,{children:e.jsx(f,{label:t.vacantPlaces>0?"Набор открыт":"Места закончились",color:t.vacantPlaces>0?"success":"error",size:"small"})})]},t.id))})]})})]})}),e.jsx(r,{container:!0,spacing:3,sx:{mb:4},children:l.programs.map(t=>e.jsx(r,{item:!0,xs:12,md:4,children:e.jsx(p,{sx:{height:"100%"},children:e.jsxs(g,{children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(f,{label:`Категория ${t.category}`,color:"primary",sx:{mr:2}}),e.jsx(f,{label:`${t.vacantPlaces} мест`,color:d(t.vacantPlaces,t.totalPlaces),size:"small"})]}),e.jsx(s,{variant:"h6",gutterBottom:!0,children:t.name}),e.jsxs(o,{sx:{mb:2},children:[e.jsxs(s,{variant:"body2",gutterBottom:!0,children:[e.jsx("strong",{children:"Длительность:"})," ",t.duration]}),e.jsxs(s,{variant:"body2",gutterBottom:!0,children:[e.jsx("strong",{children:"Стоимость:"})," ",t.cost.toLocaleString("ru-RU")," ₽"]}),e.jsxs(s,{variant:"body2",gutterBottom:!0,children:[e.jsx("strong",{children:"Расписание:"})," ",t.schedule]})]}),e.jsx(s,{variant:"body2",gutterBottom:!0,children:e.jsx("strong",{children:"Ближайшие даты начала обучения:"})}),e.jsx(o,{sx:{pl:2,mb:2},children:t.startDates.slice(0,3).map((n,x)=>e.jsxs(s,{variant:"body2",sx:{mb:.5},children:["• ",j(n)]},x))}),e.jsx(P,{variant:"contained",fullWidth:!0,disabled:t.vacantPlaces===0,sx:{mt:"auto"},onClick:()=>c(t),children:t.vacantPlaces>0?"Записаться на обучение":"Места закончились"})]})})},t.id))}),e.jsxs(r,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(r,{item:!0,xs:12,md:6,children:e.jsx(p,{sx:{height:"100%"},children:e.jsxs(g,{children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(ee,{sx:{mr:2,color:"primary.main"}}),e.jsx(s,{variant:"h5",component:"h2",children:"Требования для поступления"})]}),l.admissionRequirements.map((t,n)=>e.jsxs(s,{variant:"body2",sx:{mb:1},children:["• ",t]},n))]})})}),e.jsx(r,{item:!0,xs:12,md:6,children:e.jsx(p,{sx:{height:"100%"},children:e.jsxs(g,{children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(te,{sx:{mr:2,color:"primary.main"}}),e.jsx(s,{variant:"h5",component:"h2",children:"Необходимые документы"})]}),l.documents.map((t,n)=>e.jsxs(s,{variant:"body2",sx:{mb:1},children:["• ",t]},n))]})})})]}),e.jsx(p,{sx:{mb:4},children:e.jsxs(g,{children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(se,{sx:{mr:2,color:"primary.main"}}),e.jsx(s,{variant:"h5",component:"h2",children:"Порядок поступления"})]}),e.jsx(r,{container:!0,spacing:2,children:l.admissionProcedure.map((t,n)=>e.jsx(r,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(o,{sx:{p:2,border:2,borderColor:"primary.main",borderRadius:2,textAlign:"center",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"},children:[e.jsx(s,{variant:"h4",color:"primary.main",gutterBottom:!0,children:n+1}),e.jsx(s,{variant:"body2",children:t})]})},n))})]})}),e.jsx(p,{children:e.jsxs(g,{children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(R,{sx:{mr:2,color:"primary.main"}}),e.jsx(s,{variant:"h5",component:"h2",children:"Контактная информация для поступающих"})]}),e.jsxs(r,{container:!0,spacing:3,children:[e.jsxs(r,{item:!0,xs:12,md:6,children:[e.jsx(s,{variant:"body1",gutterBottom:!0,children:e.jsx("strong",{children:"Телефон приемной комиссии:"})}),e.jsx(s,{variant:"h6",color:"primary",gutterBottom:!0,children:l.contacts.phone}),e.jsx(s,{variant:"body1",gutterBottom:!0,children:e.jsx("strong",{children:"Электронная почта:"})}),e.jsx(s,{variant:"body1",gutterBottom:!0,children:l.contacts.email})]}),e.jsxs(r,{item:!0,xs:12,md:6,children:[e.jsx(s,{variant:"body1",gutterBottom:!0,children:e.jsx("strong",{children:"Адрес:"})}),e.jsx(s,{variant:"body1",gutterBottom:!0,children:l.contacts.address}),e.jsx(s,{variant:"body1",gutterBottom:!0,children:e.jsx("strong",{children:"Время работы приемной комиссии:"})}),e.jsx(s,{variant:"body1",children:l.contacts.workTime})]})]}),e.jsx(I,{severity:"success",sx:{mt:3},children:e.jsxs(s,{variant:"body2",children:["📞 ",e.jsx("strong",{children:"Консультации по телефону:"})," Наши специалисты готовы ответить на все ваши вопросы о поступлении, программах обучения и условиях оплаты."]})})]})}),e.jsx(o,{sx:{mt:4,textAlign:"center"},children:e.jsxs(s,{variant:"body2",color:"text.secondary",children:["Дата последнего обновления информации: ",j(l.lastUpdated)]})})]}),e.jsx(ae,{open:B,onClose:C,program:m})]})};export{xe as default};
//# sourceMappingURL=index-433e7be9.js.map
