{"version":3,"file":"documentsApi-d63edb6d.js","sources":["../../src/shared/api/documentsApi.ts"],"sourcesContent":["// Используем относительный URL для работы на хостинге\r\nconst API_BASE_URL = '/api';\r\n\r\nexport interface Document {\r\n  id: number;\r\n  title: string;\r\n  description: string;\r\n  category?: string;\r\n  fileUrl?: string;\r\n  fileName?: string;\r\n  fileSize?: string;\r\n  uploadDate: string;\r\n  lastUpdate: string;\r\n  expiryDate?: string;\r\n  status?: 'active' | 'expired' | 'not_required';\r\n}\r\n\r\nexport interface DocumentsData {\r\n  charter: Document[];\r\n  license: Document[];\r\n  accreditation: Document[];\r\n  regulations: Document[];\r\n  reports: Document[];\r\n  collective: Document[];\r\n  prescriptions: Document[];\r\n  lastUpdated: string;\r\n  [key: string]: Document[] | string;\r\n}\r\n\r\nexport interface DocumentsResponse {\r\n  status: string;\r\n  data: DocumentsData;\r\n}\r\n\r\nexport const documentsApi = {\r\n  // Получить все документы\r\n  getDocuments: async (): Promise<DocumentsResponse> => {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/documents`);\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n      return await response.json();\r\n    } catch (error) {\r\n      console.error('Ошибка при загрузке документов:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Создать новый документ (заглушка для статического API)\r\n  createDocument: async (documentData: {\r\n    title: string;\r\n    description: string;\r\n    category: string;\r\n    status?: string;\r\n    expiryDate?: string;\r\n    file?: File;\r\n  }) => {\r\n    // Заглушка для статического API\r\n    throw new Error('Редактирование документов недоступно в демо-версии. Для полной функциональности требуется серверная часть.');\r\n  },\r\n\r\n  // Обновить документ (заглушка для статического API)\r\n  updateDocument: async (id: number, documentData: {\r\n    title?: string;\r\n    description?: string;\r\n    category?: string;\r\n    status?: string;\r\n    expiryDate?: string;\r\n    file?: File;\r\n  }) => {\r\n    // Заглушка для статического API\r\n    throw new Error('Редактирование документов недоступно в демо-версии. Для полной функциональности требуется серверная часть.');\r\n  },\r\n\r\n  // Удалить документ (заглушка для статического API)\r\n  deleteDocument: async (id: number) => {\r\n    // Заглушка для статического API\r\n    throw new Error('Удаление документов недоступно в демо-версии. Для полной функциональности требуется серверная часть.');\r\n  },\r\n\r\n  // Скачать документ\r\n  downloadDocument: (fileUrl: string, fileName: string) => {\r\n    const link = document.createElement('a');\r\n    // Используем относительный URL для работы на хостинге\r\n    const fullUrl = fileUrl.startsWith('http') ? fileUrl : fileUrl;\r\n    link.href = fullUrl;\r\n    link.download = fileName;\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  },\r\n\r\n  // Просмотреть документ\r\n  viewDocument: (fileUrl: string) => {\r\n    // Используем относительный URL для работы на хостинге\r\n    const fullUrl = fileUrl.startsWith('http') ? fileUrl : fileUrl;\r\n    window.open(fullUrl, '_blank');\r\n  }\r\n}; "],"names":["API_BASE_URL","documentsApi","response","error","documentData","id","fileUrl","fileName","link","fullUrl"],"mappings":"AACA,MAAMA,EAAe,OAiCRC,EAAe,CAE1B,aAAc,SAAwC,CAChD,GAAA,CACF,MAAMC,EAAW,MAAM,MAAM,GAAGF,CAAY,YAAY,EACpD,GAAA,CAACE,EAAS,GACZ,MAAM,IAAI,MAAM,uBAAuBA,EAAS,MAAM,EAAE,EAEnD,OAAA,MAAMA,EAAS,aACfC,EAAO,CACN,cAAA,MAAM,kCAAmCA,CAAK,EAChDA,CACR,CACF,EAGA,eAAgB,MAAOC,GAOjB,CAEE,MAAA,IAAI,MAAM,4GAA4G,CAC9H,EAGA,eAAgB,MAAOC,EAAYD,IAO7B,CAEE,MAAA,IAAI,MAAM,4GAA4G,CAC9H,EAGA,eAAgB,MAAOC,GAAe,CAE9B,MAAA,IAAI,MAAM,sGAAsG,CACxH,EAGA,iBAAkB,CAACC,EAAiBC,IAAqB,CACjD,MAAAC,EAAO,SAAS,cAAc,GAAG,EAEjCC,GAAUH,EAAQ,WAAW,MAAM,EAAIA,GAC7CE,EAAK,KAAOC,EACZD,EAAK,SAAWD,EACP,SAAA,KAAK,YAAYC,CAAI,EAC9BA,EAAK,MAAM,EACF,SAAA,KAAK,YAAYA,CAAI,CAChC,EAGA,aAAeF,GAAoB,CAEjC,MAAMG,GAAUH,EAAQ,WAAW,MAAM,EAAIA,GACtC,OAAA,KAAKG,EAAS,QAAQ,CAC/B,CACF"}